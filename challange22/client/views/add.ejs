<%- include("partials/_header") %>

<body style="font-family: 'Fresca', sans-serif;">
  <div class="container">
    <div id="form-add">
      <h1 class="text-center">BREAD<br> <small>(Browse, Read, Edit, Add, Delete)</small> </h1>
      <hr>
      <h2>Add Data</h2>
      <form id="form-add">
        <div class="form-group row">
          <label for="inputString" class="col-sm-2 col-form-label">String</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="string" name="string" placeholder="String">
          </div>
        </div>
        <div class="form-group row">
          <label for="inputInteger" class="col-sm-2 col-form-label">Integer</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="integer" name='integer' placeholder="Integer">
          </div>
        </div>
        <div class="form-group row">
          <label for="inputFloat" class="col-sm-2 col-form-label">Float</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="float" name='float' placeholder="Float">
          </div>
        </div>
        <div class="form-group row">
          <label for="inputDate" class="col-sm-2 col-form-label">Date</label>
          <div class="col-sm-10">
            <input type="date" class="form-control" id="date" name="date" placeholder="End Date">
          </div>
        </div>
        <div class="form-group row">
          <label for="inputBoolean" class="col-sm-2 col-form-label">Boolean</label>
          <div class="col-sm-10">
            <select class="custom-select" id="boolean" name="boolean">
              <option value="false">false</option>
              <option value="true">true</option>
            </select>
          </div>
        </div>
        <button type="submit" class="btn btn-success button-add">Save</button>
        <a class="btn btn-warning" href="/">Cancel</a>
      </form>
      <br>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
  </script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script type="text/javascript">
    const apiUrl = "http://localhost:3000/api";
    $(document).ready(() => {
      $('#form-add').submit((e) => {
        e.preventDefault();
        addData();
      });

      const addData = () => {
        $.ajax({
            method: "POST",
            url: `${apiUrl}`,
            data: {
              string: $('#string').val(),
              integer: $('#integer').val(),
              float: $('#float').val(),
              date: $('#date').val(),
              boolean: $('#boolean').val(),
            },
            dataType: 'json'
          })
          .done((result) => {
            $('#string').val('');
            $('#integer').val('');
            $('#float').val('');
            $('#date').val('');
            $('#boolean').val('');
            location.replace('/')
          })
      }
    })
  </script>
</body>

</html>